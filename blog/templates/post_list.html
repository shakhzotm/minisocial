<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>–õ–µ–Ω—Ç–∞ ‚Äî {{ user.username }}</title>
  <style>
    :root{
      --bg:#f4f4f9;
      --card-bg:#ffffff;
      --muted:#8a8f98;
      --accent:#007bff;
      --danger:#e0245e;
      --border:rgba(0,0,0,0.08);
      --shadow: 0 6px 20px rgba(24,39,75,0.06);
      --radius:12px;
    }

    *{box-sizing:border-box}
    body{
      font-family: "Segoe UI", Roboto, Arial, sans-serif;
      background:var(--bg);
      margin:0;
      color:#222;
      -webkit-font-smoothing:antialiased;
    }

    header{
      background:var(--card-bg);
      padding:14px 28px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      box-shadow:0 1px 0 rgba(0,0,0,0.04);
      position:sticky;
      top:0;
      z-index:50;
    }
    header h1{margin:0;font-size:18px;color:#111}
    header nav a{color:var(--accent); text-decoration:none; margin-left:14px; font-weight:500}
    header nav a:hover{text-decoration:underline}

    main{
      max-width:980px;
      margin:28px auto;
      padding:22px;
    }

    .top-row{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      margin-bottom:18px;
    }
    .top-actions a{
      display:inline-block;
      padding:8px 12px;
      background:var(--accent);
      color:#fff;
      border-radius:8px;
      text-decoration:none;
      font-weight:600;
    }
    .top-actions a:hover{background:#0062d6}

    .posts-list{
      display:flex;
      flex-direction:column;
      gap:18px;
    }

    .post-card{
      background:var(--card-bg);
      border:1px solid var(--border);
      border-radius:12px;
      overflow:hidden;
      box-shadow: 0 4px 14px rgba(22,28,45,0.04);
      transition: transform .12s ease, box-shadow .12s ease;
      display:flex;
      flex-direction:column;
    }
    .post-card:hover{
      transform: translateY(-6px);
      box-shadow: 0 12px 30px rgba(22,28,45,0.08);
    }

    .post-top{
      display:flex;
      align-items:center;
      gap:12px;
      padding:12px 14px;
    }
    .post-top .mini-avatar{
      width:44px; height:44px; border-radius:50%;
      background:#ddd; background-size:cover; background-position:center;
      border:1px solid rgba(0,0,0,0.04);
      flex:0 0 44px;
    }
    .post-author{font-weight:700; color:#111; text-decoration:none}
    .post-author:hover{text-decoration:underline}
    .post-time{color:var(--muted); font-size:12px}

    .post-media{
      width:100%;
      background:#fafafa;
      display:block;
      max-height:480px;
      overflow:hidden;
    }
    .post-media img{
      display:block;
      width:100%;
      height:100%;
      object-fit:cover;
    }

    .post-body{padding:12px 14px; flex:1}
    .post-text{margin:0 0 10px 0; color:#222; line-height:1.45}
    .post-actions{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding:10px 14px;
      border-top:1px solid rgba(0,0,0,0.03);
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0));
    }

    .like-btn{
      background:none;
      border:1px solid rgba(0,0,0,0.06);
      padding:8px 12px;
      border-radius:8px;
      cursor:pointer;
      color:var(--danger);
      font-weight:600;
      display:inline-flex;
      align-items:center;
      gap:8px;
    }
    .like-btn:hover{transform:scale(1.03)}

    .comments-link{
      color:var(--muted);
      text-decoration:none;
      font-size:14px;
    }

    .no-posts{
      padding:20px;
      text-align:center;
      color:var(--muted);
    }

    .messages{
      margin:16px 0;
      list-style:none;
      padding:0;
      display:flex;
      gap:10px;
      flex-direction:column;
    }
    .messages li{
      background:#eaf4ff;
      padding:10px 12px;
      border-radius:8px;
      color:#0056b3;
      border:1px solid rgba(0,86,179,0.08);
    }

    @media (max-width:640px){
      header{padding:12px 14px}
      .post-top .mini-avatar{width:40px;height:40px}
    }
  </style>
</head>
<body>

<header>
  <h1>–õ–µ–Ω—Ç–∞ ‚Äî {{ user.username }}</h1>
  <nav>
    <a href="{% url 'profile' user.username %}">–ü—Ä–æ—Ñ–∏–ª—å</a>
    <a href="{% url 'create_post' %}">–°–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç</a>
    <a href="{% url 'logout' %}">–í—ã–π—Ç–∏</a>
  </nav>
</header>

<main>
  <div class="top-row">
    <div>
      <strong>–í—Å–µ –ø–æ—Å—Ç—ã</strong>
      <div style="color:var(--muted); font-size:13px;">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: {{ user.username }}</div>
    </div>
    <div class="top-actions">
      <a href="{% url 'create_post' %}">–ù–æ–≤—ã–π –ø–æ—Å—Ç</a>
    </div>
  </div>

  {% if messages %}
    <ul class="messages">
      {% for message in messages %}
        <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
      {% endfor %}
    </ul>
  {% endif %}

  {% if posts %}
    <div class="posts-list">
      {% for post in posts %}
        <article class="post-card">
          <div class="post-top">
            <div class="mini-avatar"
                 {% if post.author.profile.avatar %}
                   style="background-image: url('{{ post.author.profile.avatar.url }}');"
                 {% endif %}></div>

            <div>
              <a href="{% url 'profile' post.author.username %}" class="post-author">{{ post.author.username }}</a>
              <div class="post-time">{{ post.created_at|date:"d.m.Y H:i" }}</div>
            </div>
          </div>

          {% if post.image %}
            <div class="post-media">
              <a href="{% url 'post_detail' post.id %}">
                <img src="{{ post.image.url }}" alt="–§–æ—Ç–æ –ø–æ—Å—Ç–∞">
              </a>
            </div>
          {% endif %}

          <div class="post-body">
            <p class="post-text">{{ post.description|linebreaksbr }}</p>
          </div>

          <div class="post-actions">
            <form action="{% url 'like_post' post.id %}" method="post" style="margin:0;">
              {% csrf_token %}
              <button type="submit" class="like-btn">‚ù§Ô∏è {{ post.total_likes }}</button>
            </form>
            <a class="comments-link" href="{% url 'post_detail' post.id %}#comments">–ö–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
          </div>
        </article>
      {% endfor %}
    </div>
  {% else %}
    <div class="no-posts">–ü–æ—Å—Ç–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç üôÉ</div>
  {% endif %}

</main>
</body>
</html>
